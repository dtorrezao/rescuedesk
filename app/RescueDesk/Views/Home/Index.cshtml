@using Newtonsoft.Json
@using RescueDesk.ViewModels
@using RescueDesk.Utils
@model DashboardViewModel
@{
    ViewBag.Title = "Home Page";
}

<div class="col-sm-6 col-lg-3">
    <div class="card text-white bg-flat-color-1">
        <div class="card-body pb-0">
            <h4 class="mb-0">
                <span class="count">@Model.PedidosPorMes.Qtd</span>
            </h4>
            <p class="text-light">Pedidos</p>
            <div class="chart-wrapper px-0" style="height:70px;" height="70">
                <canvas id="PedidosPorMes"></canvas>
            </div>
        </div>
    </div>
</div>

<div class="col-sm-6 col-lg-3">
    <div class="card text-white bg-flat-color-2">
        <div class="card-body pb-0">
            <h4 class="mb-0">
                <span class="count">@Model.ClienteMaisPedidos.Qtd</span>
            </h4>
            <p class="text-light">Clientes com Mais Pedidos</p>
            <div class="chart-wrapper px-0" style="height:70px;" height="70">
                <canvas id="ClienteMaisPedidos"></canvas>
            </div>
        </div>
    </div>
</div>

<div class="col-sm-6 col-lg-3">
    <div class="card text-white bg-flat-color-3">
        <div class="card-body pb-0">
            <h4 class="mb-0">
                <span class="count">@Model.ServicoMaisPedidos.Qtd</span>
            </h4>
            <p class="text-light">Serviço mais solicitados</p>
            <div class="chart-wrapper px-0" style="height:70px;" height="70">
                <canvas id="ServicoMaisPedidos"></canvas>
            </div>
        </div>
    </div>
</div>

<div class="col-sm-6 col-lg-3">
    <div class="card text-white bg-flat-color-4">
        <div class="card-body pb-0">
            <h4 class="mb-0">
                <span class="count">@Model.FuncionarioMaisPedidos.Qtd</span>
            </h4>
            <p class="text-light">Funcionários Mais Pedidos</p>
            <div class="chart-wrapper px-3" style="height:70px;" height="70">
                <canvas id="FuncionarioMaisPedidos"></canvas>
            </div>
        </div>
    </div>
</div>

<div class="col-md-4">
    <aside class="profile-nav alt">
        <section class="card">
            <div class="card-header user-header alt bg-dark">
                <div class="media">
                    <a href="#">
                        <img class="align-self-center rounded-circle mr-3" style="width:85px; height:85px;" alt="" src="@Model.ProfileCard.Foto">
                    </a>
                    <div class="media-body">
                        <h2 class="text-light display-6">@Model.ProfileCard.Nome</h2>
                        <p>@Model.ProfileCard.Posicao</p>
                    </div>
                </div>
            </div>

            <ul class="list-group list-group-flush">
                <li class="list-group-item">
                    <a href="#"> <i class="fa fa-envelope-o"></i> Mail Inbox <span class="badge badge-primary pull-right">10</span></a>
                </li>
                <li class="list-group-item">
                    <a href="#"> <i class="fa fa-tasks"></i> Recent Activity <span class="badge badge-danger pull-right">15</span></a>
                </li>
                <li class="list-group-item">
                    <a href="#"> <i class="fa fa-bell-o"></i> Notification <span class="badge badge-success pull-right">11</span></a>
                </li>
                <li class="list-group-item">
                    <a href="#"> <i class="fa fa-comments-o"></i> Message <span class="badge badge-warning pull-right r-activity">03</span></a>
                </li>
            </ul>
        </section>
    </aside>
</div>

<div class="col-md-8">
    <div class="card">
        <div class="card-header">
            <strong class="card-title">Card with switch</strong>
        </div>
        <div class="card-body">
            <table class="table table-striped table-bordered" style="font-size:14px">
                <thead>
                    <tr>
                        <th>
                            @Html.DisplayNameFor(model => model.PedidosTop5[0].idpedido)
                        </th>
                        <th class="no-sort">
                            @Html.DisplayNameFor(model => model.PedidosTop5[0].assunto)
                        </th>
                        <th style="width: 15%">
                            @Html.DisplayNameFor(model => model.PedidosTop5[0].dtpedido)
                        </th>
                        <th class="no-sort" style="width: 5%">
                            @Html.DisplayNameFor(model => model.PedidosTop5[0].dtlido)
                        </th>
                        <th class="no-sort" style="width: 5%">
                            @Html.DisplayNameFor(model => model.PedidosTop5[0].dtmarcado)
                        </th>
                        <th class="no-sort" style="width: 5%">
                            @Html.DisplayNameFor(model => model.PedidosTop5[0].dtresolvido)
                        </th>
                        @if (ViewHelper.IsAdmin() || ViewHelper.IsFuncionario())
                        {
                            <th>
                                @Html.DisplayNameFor(model => model.PedidosTop5[0].atividade)
                            </th>
                        }
                        @if (ViewHelper.IsAdmin() || ViewHelper.IsFuncionario())
                        {
                            <th style="width: 10%">
                                @Html.DisplayNameFor(model => model.PedidosTop5[0].prioridade)
                            </th>
                        }
                        <th class="no-sort" style="width: 12%"></th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var item in Model.PedidosTop5)
                    {
                        <tr>
                            <td>
                                <strong style="font-weight:lighter">
                                    @Html.DisplayFor(modelItem => item.idpedido)
                                </strong>
                            </td>
                            <td>
                                <strong style="font-weight:500">

                                    @Html.DisplayFor(modelItem => item.assunto)
                                </strong>
                            </td>
                            <td align="center">
                                <strong style="font-weight:lighter">
                                    @Html.DisplayFor(modelItem => item.dtpedido)
                                </strong>
                            </td>
                            <td>
                                @if (item.dtlido == null)
                                {
                                    <a class="btn btn-link" style="padding-top: 0px; padding-bottom: 0px; margin-left: 2%"><i class="fa fa-times-circle fa-red"></i></a>
                                }
                                else
                                {
                                    <a class="btn btn-link" title="@Html.DisplayFor(modelItem => item.dtlido)" style="padding-top: 0px; padding-bottom: 0px; margin-left: 2%"><i class="fa fa-check-circle fa-green"></i></a>
                                }
                            </td>
                            <td>
                                @if (item.dtmarcado == null)
                                {
                                    <a class="btn btn-link" style="padding-top: 0px; padding-bottom: 0px; margin-left: 18%"><i class="fa fa-times-circle fa-red"></i></a>
                                }
                                else
                                {
                                    <a class="btn btn-link" title="@Html.DisplayFor(modelItem => item.dtmarcado)" style="padding-top: 0px; padding-bottom: 0px; margin-left: 18%"><i class="fa fa-check-circle fa-green"></i></a>
                                }
                            </td>
                            <td>
                                @if (item.dtresolvido == null)
                                {
                                    <a class="btn btn-link" style="padding-top: 0px; padding-bottom: 0px; margin-left: 14px"><i class="fa fa-times-circle fa-red"></i></a>
                                }
                                else
                                {
                                    <a class="btn btn-link" title="@Html.DisplayFor(modelItem => item.dtresolvido)" style="padding-top: 0px; padding-bottom: 0px; margin-left: 14px"><i class="fa fa-check-circle fa-green"></i></a>
                                }
                            </td>
                            @if (ViewHelper.IsAdmin() || ViewHelper.IsFuncionario())
                            {
                                <td>
                                    <strong style="font-weight:lighter">
                                        @Html.DisplayFor(modelItem => item.atividade)
                                    </strong>
                                </td>
                            }
                            @if (ViewHelper.IsAdmin() || ViewHelper.IsFuncionario())
                            {
                                <td>
                                    <strong style="font-weight:lighter">
                                        @Html.DisplayFor(modelItem => item.prioridade)
                                    </strong>
                                </td>
                            }
                            <td align="center">
                                <a href="@Url.Action("Edit", new { id = item.idpedido })"
                                   title="Editar"
                                   data-ajax="true"
                                   data-ajax-method="GET"
                                   data-ajax-mode="after"
                                   data-ajax-update="#modal-body"
                                   class="btn btn-link minus-padd modal-link"><i class="fa fa-pencil fa-add"></i></a>

                                <a href="@Url.Action("Details", new { id = item.idpedido })"
                                   title="Editar"
                                   data-ajax="true"
                                   data-ajax-method="GET"
                                   data-ajax-mode="after"
                                   data-ajax-update="#modal-body"
                                   class="btn btn-link minus-padd modal-link"><i class="fa fa-info-circle fa-add"></i></a>

                                
                            </td>
                        </tr>
                    }

                </tbody>
            </table>
        </div>
    </div>
</div>

@*<div class="col-xl-6">
        <div class="card">
            <div class="card-body">
                <div class="row">
                    <div class="col-sm-4">
                        <h4 class="card-title mb-0">Traffic</h4>
                        <div class="small text-muted">October 2017</div>
                    </div>
                    <!--/.col-->
                    <div class="col-sm-8 hidden-sm-down">
                        <button type="button" class="btn btn-primary float-right bg-flat-color-1"><i class="fa fa-cloud-download"></i></button>
                        <div class="btn-toolbar float-right" role="toolbar" aria-label="Toolbar with button groups">
                            <div class="btn-group mr-3" data-toggle="buttons" aria-label="First group">
                                <label class="btn btn-outline-secondary">
                                    <input type="radio" name="options" id="option1"> Day
                                </label>
                                <label class="btn btn-outline-secondary active">
                                    <input type="radio" name="options" id="option2" checked=""> Month
                                </label>
                                <label class="btn btn-outline-secondary">
                                    <input type="radio" name="options" id="option3"> Year
                                </label>
                            </div>
                        </div>
                    </div><!--/.col-->

                </div><!--/.row-->
                <div class="chart-wrapper mt-4">
                    <canvas id="trafficChart" style="height:200px;" height="200"></canvas>
                </div>
            </div>
            <div class="card-footer">
                <ul>
                    <li>
                        <div class="text-muted">Visits</div>
                        <strong>29.703 Users (40%)</strong>
                        <div class="progress progress-xs mt-2" style="height: 5px;">
                            <div class="progress-bar bg-success" role="progressbar" style="width: 40%;" aria-valuenow="40" aria-valuemin="0" aria-valuemax="100"></div>
                        </div>
                    </li>
                    <li class="hidden-sm-down">
                        <div class="text-muted">Unique</div>
                        <strong>24.093 Users (20%)</strong>
                        <div class="progress progress-xs mt-2" style="height: 5px;">
                            <div class="progress-bar bg-info" role="progressbar" style="width: 20%;" aria-valuenow="20" aria-valuemin="0" aria-valuemax="100"></div>
                        </div>
                    </li>
                    <li>
                        <div class="text-muted">Pageviews</div>
                        <strong>78.706 Views (60%)</strong>
                        <div class="progress progress-xs mt-2" style="height: 5px;">
                            <div class="progress-bar bg-warning" role="progressbar" style="width: 60%;" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100"></div>
                        </div>
                    </li>
                    <li class="hidden-sm-down">
                        <div class="text-muted">New Users</div>
                        <strong>22.123 Users (80%)</strong>
                        <div class="progress progress-xs mt-2" style="height: 5px;">
                            <div class="progress-bar bg-danger" role="progressbar" style="width: 80%;" aria-valuenow="80" aria-valuemin="0" aria-valuemax="100"></div>
                        </div>
                    </li>
                    <li class="hidden-sm-down">
                        <div class="text-muted">Bounce Rate</div>
                        <strong>40.15%</strong>
                        <div class="progress progress-xs mt-2" style="height: 5px;">
                            <div class="progress-bar" role="progressbar" style="width: 40%;" aria-valuenow="40" aria-valuemin="0" aria-valuemax="100"></div>
                        </div>
                    </li>
                </ul>
            </div>
        </div>
    </div>
    <div class="col-xl-3 col-lg-6">
        <section class="card">
            <div class="twt-feed blue-bg">
                <div class="corner-ribon black-ribon">
                    <i class="fa fa-twitter"></i>
                </div>
                <div class="fa fa-twitter wtt-mark"></div>
                <div class="media">
                    <a href="#">
                        <img class="align-self-center rounded-circle mr-3" style="width:85px; height:85px;" alt="" src="images/admin.jpg">
                    </a>
                    <div class="media-body">
                        <h2 class="text-white display-6">Jim Doe</h2>
                        <p class="text-light">Project Manager</p>
                    </div>
                </div>
            </div>
            <div class="weather-category twt-category">
                <ul>
                    <li class="active">
                        <h5>750</h5>
                        Tweets
                    </li>
                    <li>
                        <h5>865</h5>
                        Following
                    </li>
                    <li>
                        <h5>3645</h5>
                        Followers
                    </li>
                </ul>
            </div>
            <div class="twt-write col-sm-12">
                <textarea placeholder="Write your Tweet and Enter" rows="1" class="form-control t-text-area"></textarea>
            </div>
            <footer class="twt-footer">
                <a href="#"><i class="fa fa-camera"></i></a>
                <a href="#"><i class="fa fa-map-marker"></i></a>
                New Castle, UK
                <span class="pull-right">
                    32
                </span>
            </footer>
        </section>
    </div>

    <div class="col-xl-3 col-lg-6">
        <div class="card">
            <div class="card-body">
                <div class="stat-widget-one">
                    <div class="stat-icon dib"><i class="ti-money text-success border-success"></i></div>
                    <div class="stat-content dib">
                        <div class="stat-text">Total Profit</div>
                        <div class="stat-digit">1,012</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="col-xl-3 col-lg-6">
        <div class="card">
            <div class="card-body">
                <div class="stat-widget-one">
                    <div class="stat-icon dib"><i class="ti-user text-primary border-primary"></i></div>
                    <div class="stat-content dib">
                        <div class="stat-text">New Customer</div>
                        <div class="stat-digit">961</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="col-xl-3 col-lg-6">
        <div class="card">
            <div class="card-body">
                <div class="stat-widget-one">
                    <div class="stat-icon dib"><i class="ti-layout-grid2 text-warning border-warning"></i></div>
                    <div class="stat-content dib">
                        <div class="stat-text">Active Projects</div>
                        <div class="stat-digit">770</div>
                    </div>
                </div>
            </div>
        </div>
    </div>*@



@section Scripts {
    <script>
        (function ($) {
            "use strict";
            var ctx = document.getElementById("PedidosPorMes");
            ctx.height = 150;
            var myChart1 = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: @Html.Raw(JsonConvert.SerializeObject(Model.PedidosPorMes.Labels)),
                    type: 'line',
                    datasets: [{
                        data: @Html.Raw(JsonConvert.SerializeObject(Model.PedidosPorMes.Data)),
                        label: 'Qtd de Pedidos Por Mês',
                        backgroundColor: 'transparent',
                        borderColor: 'rgba(255,255,255,.55)',
                    },]
                },
                options: {
                    maintainAspectRatio: false,
                    legend: {
                        display: false
                    },
                    responsive: true,
                    tooltips: {
                        mode: 'index',
                        titleFontSize: 12,
                        titleFontColor: '#000',
                        bodyFontColor: '#000',
                        backgroundColor: '#fff',
                        titleFontFamily: 'Montserrat',
                        bodyFontFamily: 'Montserrat',
                        cornerRadius: 3,
                        intersect: false,
                    },
                    scales: {
                        xAxes: [{
                            gridLines: {
                                color: 'transparent',
                                zeroLineColor: 'transparent'
                            },
                            ticks: {
                                fontSize: 2,
                                fontColor: 'transparent'
                            }
                        }],
                        yAxes: [{
                            display: false,
                            ticks: {
                                display: false,
                            }
                        }]
                    },
                    title: {
                        display: false,
                    },
                    elements: {
                        line: {
                            borderWidth: 1
                        },
                        point: {
                            radius: 4,
                            hitRadius: 10,
                            hoverRadius: 4
                        }
                    }
                }
            });

            var cmp = document.getElementById("ClienteMaisPedidos");
            cmp.height = 150;
            var myChart2 = new Chart(cmp, {
                type: 'line',
                data: {
                    labels: @Html.Raw(JsonConvert.SerializeObject(Model.ClienteMaisPedidos.Labels)),
                    type: 'line',
                    datasets: [{
                        data: @Html.Raw(JsonConvert.SerializeObject(Model.ClienteMaisPedidos.Data)),
                        label: 'Cliente com mais Pedidos',
                        backgroundColor: 'transparent',
                        borderColor: 'rgba(255,255,255,.55)',
                    },]
                },
                options: {
                    maintainAspectRatio: false,
                    legend: {
                        display: false
                    },
                    responsive: true,
                    tooltips: {
                        mode: 'index',
                        titleFontSize: 12,
                        titleFontColor: '#000',
                        bodyFontColor: '#000',
                        backgroundColor: '#fff',
                        titleFontFamily: 'Montserrat',
                        bodyFontFamily: 'Montserrat',
                        cornerRadius: 3,
                        intersect: false,
                    },
                    scales: {
                        xAxes: [{
                            gridLines: {
                                color: 'transparent',
                                zeroLineColor: 'transparent'
                            },
                            ticks: {
                                fontSize: 2,
                                fontColor: 'transparent'
                            }
                        }],
                        yAxes: [{
                            display: false,
                            ticks: {
                                display: false,
                            }
                        }]
                    },
                    title: {
                        display: false,
                    },
                    elements: {
                        line: {
                            borderWidth: 1
                        },
                        point: {
                            radius: 4,
                            hitRadius: 10,
                            hoverRadius: 4
                        }
                    }
                }
            });

            var smp = document.getElementById("ServicoMaisPedidos");
            smp.height = 150;
            var myChart3 = new Chart(smp, {
                type: 'line',
                data: {
                    labels: @Html.Raw(JsonConvert.SerializeObject(Model.ServicoMaisPedidos.Labels)),
                    type: 'line',
                    datasets: [{
                        data: @Html.Raw(JsonConvert.SerializeObject(Model.ServicoMaisPedidos.Data)),
                        label: 'Servico com Mais Pedidos',
                        backgroundColor: 'transparent',
                        borderColor: 'rgba(255,255,255,.55)',
                    },]
                },
                options: {
                    maintainAspectRatio: false,
                    legend: {
                        display: false
                    },
                    responsive: true,
                    tooltips: {
                        mode: 'index',
                        titleFontSize: 12,
                        titleFontColor: '#000',
                        bodyFontColor: '#000',
                        backgroundColor: '#fff',
                        titleFontFamily: 'Montserrat',
                        bodyFontFamily: 'Montserrat',
                        cornerRadius: 3,
                        intersect: false,
                    },
                    scales: {
                        xAxes: [{
                            gridLines: {
                                color: 'transparent',
                                zeroLineColor: 'transparent'
                            },
                            ticks: {
                                fontSize: 2,
                                fontColor: 'transparent'
                            }
                        }],
                        yAxes: [{
                            display: false,
                            ticks: {
                                display: false,
                            }
                        }]
                    },
                    title: {
                        display: false,
                    },
                    elements: {
                        line: {
                            borderWidth: 1
                        },
                        point: {
                            radius: 4,
                            hitRadius: 10,
                            hoverRadius: 4
                        }
                    }
                }
            });

            var fmp = document.getElementById("FuncionarioMaisPedidos");
            fmp.height = 150;
            var myChart4 = new Chart(fmp, {
                type: 'line',
                data: {
                    labels: @Html.Raw(JsonConvert.SerializeObject(Model.FuncionarioMaisPedidos.Labels)),
                    type: 'line',
                    datasets: [{
                        data: @Html.Raw(JsonConvert.SerializeObject(Model.FuncionarioMaisPedidos.Data)),
                        label: 'Funcionario com Mais Pedidos',
                        backgroundColor: 'transparent',
                        borderColor: 'rgba(255,255,255,.55)',
                    },]
                },
                options: {
                    maintainAspectRatio: false,
                    legend: {
                        display: false
                    },
                    responsive: true,
                    tooltips: {
                        mode: 'index',
                        titleFontSize: 12,
                        titleFontColor: '#000',
                        bodyFontColor: '#000',
                        backgroundColor: '#fff',
                        titleFontFamily: 'Montserrat',
                        bodyFontFamily: 'Montserrat',
                        cornerRadius: 3,
                        intersect: false,
                    },
                    scales: {
                        xAxes: [{
                            gridLines: {
                                color: 'transparent',
                                zeroLineColor: 'transparent'
                            },
                            ticks: {
                                fontSize: 2,
                                fontColor: 'transparent'
                            }
                        }],
                        yAxes: [{
                            display: false,
                            ticks: {
                                display: false,
                            }
                        }]
                    },
                    title: {
                        display: false,
                    },
                    elements: {
                        line: {
                            borderWidth: 1
                        },
                        point: {
                            radius: 4,
                            hitRadius: 10,
                            hoverRadius: 4
                        }
                    }
                }
            });


        })(jQuery);
    </script>
}
<style>
    .card.text-white {
        height: 175px;
    }
</style>